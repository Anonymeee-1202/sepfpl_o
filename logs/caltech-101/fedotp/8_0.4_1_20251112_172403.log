2025-11-12 17:24:03 - 8_0.4_1 - INFO - 日志文件已创建: logs/caltech-101/fedotp/8_0.4_1_20251112_172403.log
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Loading trainer: DP_FPL
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Loading dataset: Caltech101
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Reading split from /home/liuxin25/dataset/caltech-101/split_zhou_Caltech101.json
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Creating a baseline federated dataset
2025-11-12 17:24:03 - 8_0.4_1 - INFO - class_num 100
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [20, 79, 93, 54, 52, 65, 0, 1, 48, 74]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 0, output_dict_len: 673
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [44, 82, 35, 69, 91, 42, 33, 14, 5, 62]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 1, output_dict_len: 296
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [32, 55, 96, 10, 21, 31, 90, 27, 28, 76]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 2, output_dict_len: 251
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [80, 71, 66, 58, 23, 70, 60, 72, 17, 18]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 3, output_dict_len: 275
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [45, 34, 11, 56, 84, 13, 41, 30, 24, 85]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 4, output_dict_len: 369
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [51, 75, 37, 6, 53, 94, 95, 39, 47, 98]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 5, output_dict_len: 265
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [36, 7, 50, 3, 63, 59, 9, 77, 64, 92]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 6, output_dict_len: 286
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [86, 97, 61, 19, 25, 4, 16, 8, 46, 26]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 7, output_dict_len: 675
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [2, 88, 29, 22, 87, 67, 68, 38, 83, 15]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 8, output_dict_len: 695
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [12, 81, 43, 73, 78, 40, 99, 57, 89, 49]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 9, output_dict_len: 343
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Creating a baseline federated dataset
2025-11-12 17:24:03 - 8_0.4_1 - INFO - class_num 100
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [20, 79, 93, 54, 52, 65, 0, 1, 48, 74]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 0, output_dict_len: 399
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [44, 82, 35, 69, 91, 42, 33, 14, 5, 62]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 1, output_dict_len: 176
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [32, 55, 96, 10, 21, 31, 90, 27, 28, 76]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 2, output_dict_len: 154
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [80, 71, 66, 58, 23, 70, 60, 72, 17, 18]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 3, output_dict_len: 162
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [45, 34, 11, 56, 84, 13, 41, 30, 24, 85]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 4, output_dict_len: 221
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [51, 75, 37, 6, 53, 94, 95, 39, 47, 98]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 5, output_dict_len: 157
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [36, 7, 50, 3, 63, 59, 9, 77, 64, 92]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 6, output_dict_len: 171
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [86, 97, 61, 19, 25, 4, 16, 8, 46, 26]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 7, output_dict_len: 404
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [2, 88, 29, 22, 87, 67, 68, 38, 83, 15]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 8, output_dict_len: 415
2025-11-12 17:24:03 - 8_0.4_1 - INFO - user class dict total [12, 81, 43, 73, 78, 40, 99, 57, 89, 49]
2025-11-12 17:24:03 - 8_0.4_1 - INFO - idx: 9, output_dict_len: 206
2025-11-12 17:24:03 - 8_0.4_1 - INFO - Loading CLIP (backbone: ViT-B/16)
2025-11-12 17:24:06 - 8_0.4_1 - INFO - Building custom CLIP
2025-11-12 17:24:06 - 8_0.4_1 - INFO - Turning off gradients in both the image and the text encoder
2025-11-12 17:24:26 - 8_0.4_1 - INFO - [Epoch 1/30] 训练耗时: 20.04s | 平均训练准确率: 52.86
2025-11-12 17:24:46 - 8_0.4_1 - INFO - [Epoch 2/30] 训练耗时: 19.69s | 平均训练准确率: 64.69
2025-11-12 17:25:06 - 8_0.4_1 - INFO - [Epoch 3/30] 训练耗时: 19.88s | 平均训练准确率: 70.98
2025-11-12 17:25:27 - 8_0.4_1 - INFO - [Epoch 4/30] 训练耗时: 20.98s | 平均训练准确率: 73.48
2025-11-12 17:25:47 - 8_0.4_1 - INFO - [Epoch 5/30] 训练耗时: 20.16s | 平均训练准确率: 75.85
2025-11-12 17:26:07 - 8_0.4_1 - INFO - [Epoch 6/30] 训练耗时: 20.37s | 平均训练准确率: 73.39
2025-11-12 17:27:44 - 8_0.4_1 - INFO - [Epoch 7/30] 训练耗时: 96.31s | 平均训练准确率: 72.77
2025-11-12 17:28:53 - 8_0.4_1 - INFO - [Epoch 8/30] 训练耗时: 69.36s | 平均训练准确率: 73.48
2025-11-12 17:29:52 - 8_0.4_1 - INFO - [Epoch 9/30] 训练耗时: 58.82s | 平均训练准确率: 73.88
2025-11-12 17:30:12 - 8_0.4_1 - INFO - [Epoch 10/30] 训练耗时: 20.35s | 平均训练准确率: 74.11
2025-11-12 17:30:31 - 8_0.4_1 - INFO - [Epoch 11/30] 训练耗时: 19.36s | 平均训练准确率: 74.55
2025-11-12 17:30:52 - 8_0.4_1 - INFO - [Epoch 12/30] 训练耗时: 20.29s | 平均训练准确率: 75.45
2025-11-12 17:31:12 - 8_0.4_1 - INFO - [Epoch 13/30] 训练耗时: 19.91s | 平均训练准确率: 75.58
2025-11-12 17:31:31 - 8_0.4_1 - INFO - [Epoch 14/30] 训练耗时: 19.83s | 平均训练准确率: 74.38
2025-11-12 17:31:51 - 8_0.4_1 - INFO - [Epoch 15/30] 训练耗时: 20.03s | 平均训练准确率: 77.28
2025-11-12 17:32:11 - 8_0.4_1 - INFO - [Epoch 16/30] 训练耗时: 19.68s | 平均训练准确率: 76.12
2025-11-12 17:32:31 - 8_0.4_1 - INFO - [Epoch 17/30] 训练耗时: 19.79s | 平均训练准确率: 74.96
2025-11-12 17:32:52 - 8_0.4_1 - INFO - [Epoch 18/30] 训练耗时: 20.94s | 平均训练准确率: 76.96
2025-11-12 17:33:12 - 8_0.4_1 - INFO - [Epoch 19/30] 训练耗时: 19.94s | 平均训练准确率: 76.47
2025-11-12 17:33:32 - 8_0.4_1 - INFO - [Epoch 20/30] 训练耗时: 20.42s | 平均训练准确率: 74.96
2025-11-12 17:33:52 - 8_0.4_1 - INFO - [Epoch 21/30] 训练耗时: 19.67s | 平均训练准确率: 75.58
2025-11-12 17:34:12 - 8_0.4_1 - INFO - [Epoch 22/30] 训练耗时: 20.06s | 平均训练准确率: 74.20
2025-11-12 17:34:32 - 8_0.4_1 - INFO - [Epoch 23/30] 训练耗时: 19.75s | 平均训练准确率: 76.21
2025-11-12 17:34:52 - 8_0.4_1 - INFO - [Epoch 24/30] 训练耗时: 19.98s | 平均训练准确率: 75.22
2025-11-12 17:35:11 - 8_0.4_1 - INFO - [Epoch 25/30] 训练耗时: 19.69s | 平均训练准确率: 75.45
2025-11-12 17:35:36 - 8_0.4_1 - INFO - [Epoch 26/30] 训练耗时: 24.42s | 平均训练准确率: 76.52
2025-11-12 17:37:28 - 8_0.4_1 - INFO - [Epoch 27/30] 训练耗时: 112.65s | 平均训练准确率: 76.38
2025-11-12 17:38:45 - 8_0.4_1 - INFO - [Epoch 28/30] 训练耗时: 76.66s | 平均训练准确率: 77.59
2025-11-12 17:38:45 - 8_0.4_1 - INFO - ------------local test start-------------
2025-11-12 17:38:45 - 8_0.4_1 - INFO - Evaluate on the client0 local set
2025-11-12 17:39:04 - 8_0.4_1 - INFO - => result | total 399 | correct 296 | acc 74.19% | err 25.81% | macro_f1 84.66%
2025-11-12 17:39:04 - 8_0.4_1 - INFO - Evaluate on the client0 neighbor set
2025-11-12 17:39:28 - 8_0.4_1 - INFO - => result | total 2,066 | correct 1,909 | acc 92.40% | err 7.60% | macro_f1 87.84%
2025-11-12 17:39:28 - 8_0.4_1 - INFO - Evaluate on the client1 local set
2025-11-12 17:39:29 - 8_0.4_1 - INFO - => result | total 176 | correct 166 | acc 94.32% | err 5.68% | macro_f1 95.35%
2025-11-12 17:39:29 - 8_0.4_1 - INFO - Evaluate on the client1 neighbor set
2025-11-12 17:39:45 - 8_0.4_1 - INFO - => result | total 2,289 | correct 2,036 | acc 88.95% | err 11.05% | macro_f1 85.10%
2025-11-12 17:39:45 - 8_0.4_1 - INFO - Evaluate on the client2 local set
2025-11-12 17:39:46 - 8_0.4_1 - INFO - => result | total 154 | correct 109 | acc 70.78% | err 29.22% | macro_f1 72.28%
2025-11-12 17:39:46 - 8_0.4_1 - INFO - Evaluate on the client2 neighbor set
2025-11-12 17:40:02 - 8_0.4_1 - INFO - => result | total 2,311 | correct 2,089 | acc 90.39% | err 9.61% | macro_f1 88.13%
2025-11-12 17:40:02 - 8_0.4_1 - INFO - Evaluate on the client3 local set
2025-11-12 17:40:03 - 8_0.4_1 - INFO - => result | total 162 | correct 139 | acc 85.80% | err 14.20% | macro_f1 85.76%
2025-11-12 17:40:03 - 8_0.4_1 - INFO - Evaluate on the client3 neighbor set
2025-11-12 17:40:20 - 8_0.4_1 - INFO - => result | total 2,303 | correct 2,058 | acc 89.36% | err 10.64% | macro_f1 86.12%
2025-11-12 17:40:20 - 8_0.4_1 - INFO - Evaluate on the client4 local set
2025-11-12 17:40:21 - 8_0.4_1 - INFO - => result | total 221 | correct 199 | acc 90.05% | err 9.95% | macro_f1 87.19%
2025-11-12 17:40:21 - 8_0.4_1 - INFO - Evaluate on the client4 neighbor set
2025-11-12 17:40:36 - 8_0.4_1 - INFO - => result | total 2,244 | correct 1,996 | acc 88.95% | err 11.05% | macro_f1 85.57%
2025-11-12 17:40:36 - 8_0.4_1 - INFO - Evaluate on the client5 local set
2025-11-12 17:40:38 - 8_0.4_1 - INFO - => result | total 157 | correct 146 | acc 92.99% | err 7.01% | macro_f1 95.71%
2025-11-12 17:40:38 - 8_0.4_1 - INFO - Evaluate on the client5 neighbor set
2025-11-12 17:40:56 - 8_0.4_1 - INFO - => result | total 2,308 | correct 2,048 | acc 88.73% | err 11.27% | macro_f1 84.92%
2025-11-12 17:40:56 - 8_0.4_1 - INFO - Evaluate on the client6 local set
2025-11-12 17:40:57 - 8_0.4_1 - INFO - => result | total 171 | correct 152 | acc 88.89% | err 11.11% | macro_f1 93.00%
2025-11-12 17:40:57 - 8_0.4_1 - INFO - Evaluate on the client6 neighbor set
2025-11-12 17:41:50 - 8_0.4_1 - INFO - => result | total 2,294 | correct 2,041 | acc 88.97% | err 11.03% | macro_f1 84.76%
2025-11-12 17:41:50 - 8_0.4_1 - INFO - Evaluate on the client7 local set
2025-11-12 17:42:19 - 8_0.4_1 - INFO - => result | total 404 | correct 381 | acc 94.31% | err 5.69% | macro_f1 92.27%
2025-11-12 17:42:19 - 8_0.4_1 - INFO - Evaluate on the client7 neighbor set
2025-11-12 17:43:45 - 8_0.4_1 - INFO - => result | total 2,061 | correct 1,807 | acc 87.68% | err 12.32% | macro_f1 84.61%
2025-11-12 17:43:45 - 8_0.4_1 - INFO - Evaluate on the client8 local set
2025-11-12 17:44:01 - 8_0.4_1 - INFO - => result | total 415 | correct 407 | acc 98.07% | err 1.93% | macro_f1 96.94%
2025-11-12 17:44:01 - 8_0.4_1 - INFO - Evaluate on the client8 neighbor set
2025-11-12 17:45:17 - 8_0.4_1 - INFO - => result | total 2,050 | correct 1,773 | acc 86.49% | err 13.51% | macro_f1 83.41%
2025-11-12 17:45:17 - 8_0.4_1 - INFO - Evaluate on the client9 local set
2025-11-12 17:45:21 - 8_0.4_1 - INFO - => result | total 206 | correct 200 | acc 97.09% | err 2.91% | macro_f1 97.69%
2025-11-12 17:45:21 - 8_0.4_1 - INFO - Evaluate on the client9 neighbor set
2025-11-12 17:46:08 - 8_0.4_1 - INFO - => result | total 2,259 | correct 1,977 | acc 87.52% | err 12.48% | macro_f1 84.77%
2025-11-12 17:46:08 - 8_0.4_1 - INFO - Global test local acc: 88.65
2025-11-12 17:46:08 - 8_0.4_1 - INFO - Global test neighbor acc: 88.94
2025-11-12 17:46:08 - 8_0.4_1 - INFO - ------------local test finish-------------
2025-11-12 17:46:08 - 8_0.4_1 - INFO - [Epoch 28/30] 测试耗时: 443.07s
