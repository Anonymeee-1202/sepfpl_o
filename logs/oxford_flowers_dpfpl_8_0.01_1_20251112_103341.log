2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - 日志文件已创建: logs/oxford_flowers_dpfpl_8_0.01_1_20251112_103341.log
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Loading trainer: DP_FPL
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Loading dataset: OxfordFlowers
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Reading split from /home/liuxin25/dataset/oxford_flowers/split_zhou_OxfordFlowers.json
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Creating a baseline federated dataset
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - class_num 102
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 0, output_dict_len: 451
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 1, output_dict_len: 562
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 2, output_dict_len: 373
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 3, output_dict_len: 350
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 4, output_dict_len: 302
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 5, output_dict_len: 433
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 6, output_dict_len: 367
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 7, output_dict_len: 387
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 8, output_dict_len: 341
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 9, output_dict_len: 527
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Creating a baseline federated dataset
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - class_num 102
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 0, output_dict_len: 269
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 1, output_dict_len: 339
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 2, output_dict_len: 223
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 3, output_dict_len: 211
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 4, output_dict_len: 178
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 5, output_dict_len: 262
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 6, output_dict_len: 223
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 7, output_dict_len: 234
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 8, output_dict_len: 205
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - idx: 9, output_dict_len: 319
2025-11-12 10:33:41 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Loading CLIP (backbone: ViT-B/16)
2025-11-12 10:33:45 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Building custom CLIP
2025-11-12 10:33:45 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Turning off gradients in both the image and the text encoder
2025-11-12 10:34:23 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 1/30] 训练耗时: 38.48s | 平均训练准确率: 8.12
2025-11-12 10:34:59 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 2/30] 训练耗时: 35.95s | 平均训练准确率: 52.99
2025-11-12 10:35:34 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 3/30] 训练耗时: 34.92s | 平均训练准确率: 65.94
2025-11-12 10:36:10 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 4/30] 训练耗时: 35.67s | 平均训练准确率: 68.26
2025-11-12 10:36:49 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 5/30] 训练耗时: 39.35s | 平均训练准确率: 68.75
2025-11-12 10:37:34 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 6/30] 训练耗时: 44.71s | 平均训练准确率: 69.86
2025-11-12 10:38:16 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 7/30] 训练耗时: 42.19s | 平均训练准确率: 70.66
2025-11-12 10:39:01 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 8/30] 训练耗时: 44.83s | 平均训练准确率: 70.21
2025-11-12 10:39:40 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 9/30] 训练耗时: 38.81s | 平均训练准确率: 70.66
2025-11-12 10:40:17 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 10/30] 训练耗时: 37.58s | 平均训练准确率: 72.22
2025-11-12 10:40:55 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 11/30] 训练耗时: 37.78s | 平均训练准确率: 72.08
2025-11-12 10:41:33 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 12/30] 训练耗时: 37.27s | 平均训练准确率: 72.92
2025-11-12 10:42:11 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 13/30] 训练耗时: 38.19s | 平均训练准确率: 72.81
2025-11-12 10:42:49 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 14/30] 训练耗时: 38.37s | 平均训练准确率: 73.06
2025-11-12 10:43:26 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 15/30] 训练耗时: 37.28s | 平均训练准确率: 73.47
2025-11-12 10:44:06 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 16/30] 训练耗时: 39.41s | 平均训练准确率: 72.92
2025-11-12 10:44:43 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 17/30] 训练耗时: 37.44s | 平均训练准确率: 73.02
2025-11-12 10:45:20 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 18/30] 训练耗时: 36.36s | 平均训练准确率: 72.74
2025-11-12 10:45:58 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 19/30] 训练耗时: 38.31s | 平均训练准确率: 73.19
2025-11-12 10:46:38 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 20/30] 训练耗时: 40.14s | 平均训练准确率: 74.13
2025-11-12 10:47:15 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 21/30] 训练耗时: 37.13s | 平均训练准确率: 73.47
2025-11-12 10:47:52 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 22/30] 训练耗时: 36.66s | 平均训练准确率: 73.89
2025-11-12 10:48:29 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 23/30] 训练耗时: 36.70s | 平均训练准确率: 72.88
2025-11-12 10:49:06 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 24/30] 训练耗时: 37.94s | 平均训练准确率: 75.10
2025-11-12 10:49:43 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 25/30] 训练耗时: 36.89s | 平均训练准确率: 73.85
2025-11-12 10:50:22 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 26/30] 训练耗时: 38.74s | 平均训练准确率: 75.69
2025-11-12 10:50:58 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 27/30] 训练耗时: 36.43s | 平均训练准确率: 75.42
2025-11-12 10:51:35 - oxford_flowers_dpfpl_8_0.01_1 - INFO - [Epoch 28/30] 训练耗时: 36.65s | 平均训练准确率: 75.83
2025-11-12 10:51:35 - oxford_flowers_dpfpl_8_0.01_1 - INFO - ------------local test start-------------
2025-11-12 10:51:35 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client0 local set
2025-11-12 10:51:40 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 269 | correct: 138 | accuracy: 51.3% | error: 48.7% | macro_f1: 51.3%
2025-11-12 10:51:40 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client0 neighbor set
2025-11-12 10:52:10 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,194 | correct: 1,707 | accuracy: 77.8% | error: 22.2% | macro_f1: 70.3%
2025-11-12 10:52:10 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client1 local set
2025-11-12 10:52:15 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 339 | correct: 254 | accuracy: 74.9% | error: 25.1% | macro_f1: 72.3%
2025-11-12 10:52:15 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client1 neighbor set
2025-11-12 10:52:44 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,124 | correct: 1,590 | accuracy: 74.9% | error: 25.1% | macro_f1: 68.2%
2025-11-12 10:52:44 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client2 local set
2025-11-12 10:52:47 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 223 | correct: 185 | accuracy: 83.0% | error: 17.0% | macro_f1: 75.7%
2025-11-12 10:52:47 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client2 neighbor set
2025-11-12 10:53:21 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,240 | correct: 1,661 | accuracy: 74.2% | error: 25.8% | macro_f1: 67.2%
2025-11-12 10:53:21 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client3 local set
2025-11-12 10:53:24 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 211 | correct: 186 | accuracy: 88.2% | error: 11.8% | macro_f1: 84.8%
2025-11-12 10:53:24 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client3 neighbor set
2025-11-12 10:53:54 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,252 | correct: 1,664 | accuracy: 73.9% | error: 26.1% | macro_f1: 66.9%
2025-11-12 10:53:54 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client4 local set
2025-11-12 10:53:56 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 178 | correct: 137 | accuracy: 77.0% | error: 23.0% | macro_f1: 86.6%
2025-11-12 10:53:56 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client4 neighbor set
2025-11-12 10:54:26 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,285 | correct: 1,720 | accuracy: 75.3% | error: 24.7% | macro_f1: 67.3%
2025-11-12 10:54:26 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client5 local set
2025-11-12 10:54:29 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 262 | correct: 198 | accuracy: 75.6% | error: 24.4% | macro_f1: 69.1%
2025-11-12 10:54:29 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client5 neighbor set
2025-11-12 10:54:58 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,201 | correct: 1,658 | accuracy: 75.3% | error: 24.7% | macro_f1: 68.6%
2025-11-12 10:54:58 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client6 local set
2025-11-12 10:55:01 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 223 | correct: 152 | accuracy: 68.2% | error: 31.8% | macro_f1: 72.0%
2025-11-12 10:55:01 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client6 neighbor set
2025-11-12 10:55:30 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,240 | correct: 1,707 | accuracy: 76.2% | error: 23.8% | macro_f1: 68.6%
2025-11-12 10:55:30 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client7 local set
2025-11-12 10:55:33 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 234 | correct: 188 | accuracy: 80.3% | error: 19.7% | macro_f1: 79.5%
2025-11-12 10:55:33 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client7 neighbor set
2025-11-12 10:56:02 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 2,229 | correct: 1,668 | accuracy: 74.8% | error: 25.2% | macro_f1: 67.2%
2025-11-12 10:56:02 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client8 local set
2025-11-12 10:56:05 - oxford_flowers_dpfpl_8_0.01_1 - INFO - => result | total: 205 | correct: 162 | accuracy: 79.0% | error: 21.0% | macro_f1: 80.5%
2025-11-12 10:56:05 - oxford_flowers_dpfpl_8_0.01_1 - INFO - Evaluate on the client8 neighbor set
