2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - 日志文件已创建: logs/oxford_flowers_dpfpl_8_0.0_1_20251112_115419.log
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Loading trainer: DP_FPL
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Loading dataset: OxfordFlowers
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Reading split from /home/liuxin25/dataset/oxford_flowers/split_zhou_OxfordFlowers.json
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Creating a baseline federated dataset
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - class_num 102
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 0, output_dict_len: 451
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 1, output_dict_len: 562
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 2, output_dict_len: 373
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 3, output_dict_len: 350
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 4, output_dict_len: 302
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 5, output_dict_len: 433
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 6, output_dict_len: 367
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 7, output_dict_len: 387
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 8, output_dict_len: 341
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 9, output_dict_len: 527
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Creating a baseline federated dataset
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - class_num 102
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 0, output_dict_len: 269
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 1, output_dict_len: 339
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 2, output_dict_len: 223
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 3, output_dict_len: 211
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 4, output_dict_len: 178
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 5, output_dict_len: 262
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 6, output_dict_len: 223
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 7, output_dict_len: 234
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 8, output_dict_len: 205
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - idx: 9, output_dict_len: 319
2025-11-12 11:54:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Loading CLIP (backbone: ViT-B/16)
2025-11-12 11:54:22 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Building custom CLIP
2025-11-12 11:54:22 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Turning off gradients in both the image and the text encoder
2025-11-12 11:54:50 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 1/3] 训练耗时: 27.52s | 平均训练准确率: 8.12
2025-11-12 11:54:50 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test start-------------
2025-11-12 11:54:50 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client0 local set
2025-11-12 11:54:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 269 | correct 70 | acc 26.02% | err 73.98% | macro_f1 22.65%
2025-11-12 11:54:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client1 local set
2025-11-12 11:54:56 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 339 | correct 56 | acc 16.52% | err 83.48% | macro_f1 25.99%
2025-11-12 11:54:56 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client2 local set
2025-11-12 11:54:58 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 30 | acc 13.45% | err 86.55% | macro_f1 15.98%
2025-11-12 11:54:58 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client3 local set
2025-11-12 11:55:00 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 211 | correct 50 | acc 23.70% | err 76.30% | macro_f1 17.41%
2025-11-12 11:55:00 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client4 local set
2025-11-12 11:55:01 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 178 | correct 35 | acc 19.66% | err 80.34% | macro_f1 25.81%
2025-11-12 11:55:01 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client5 local set
2025-11-12 11:55:04 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 262 | correct 66 | acc 25.19% | err 74.81% | macro_f1 36.11%
2025-11-12 11:55:04 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client6 local set
2025-11-12 11:55:06 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 67 | acc 30.04% | err 69.96% | macro_f1 31.44%
2025-11-12 11:55:06 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client7 local set
2025-11-12 11:55:08 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 234 | correct 113 | acc 48.29% | err 51.71% | macro_f1 63.30%
2025-11-12 11:55:08 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client8 local set
2025-11-12 11:55:10 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 205 | correct 12 | acc 5.85% | err 94.15% | macro_f1 9.52%
2025-11-12 11:55:10 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client9 local set
2025-11-12 11:55:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 319 | correct 96 | acc 30.09% | err 69.91% | macro_f1 30.46%
2025-11-12 11:55:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Global test local acc: 23.88
2025-11-12 11:55:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test finish-------------
2025-11-12 11:55:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 1/3] 测试耗时: 22.51s
2025-11-12 11:55:38 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 2/3] 训练耗时: 24.87s | 平均训练准确率: 47.71
2025-11-12 11:55:38 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test start-------------
2025-11-12 11:55:38 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client0 local set
2025-11-12 11:55:40 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 269 | correct 116 | acc 43.12% | err 56.88% | macro_f1 47.28%
2025-11-12 11:55:40 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client1 local set
2025-11-12 11:55:43 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 339 | correct 234 | acc 69.03% | err 30.97% | macro_f1 70.84%
2025-11-12 11:55:43 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client2 local set
2025-11-12 11:55:45 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 167 | acc 74.89% | err 25.11% | macro_f1 71.50%
2025-11-12 11:55:45 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client3 local set
2025-11-12 11:55:47 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 211 | correct 175 | acc 82.94% | err 17.06% | macro_f1 78.44%
2025-11-12 11:55:47 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client4 local set
2025-11-12 11:55:48 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 178 | correct 136 | acc 76.40% | err 23.60% | macro_f1 85.39%
2025-11-12 11:55:48 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client5 local set
2025-11-12 11:55:51 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 262 | correct 212 | acc 80.92% | err 19.08% | macro_f1 78.73%
2025-11-12 11:55:51 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client6 local set
2025-11-12 11:55:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 111 | acc 49.78% | err 50.22% | macro_f1 56.99%
2025-11-12 11:55:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client7 local set
2025-11-12 11:55:55 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 234 | correct 131 | acc 55.98% | err 44.02% | macro_f1 68.40%
2025-11-12 11:55:55 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client8 local set
2025-11-12 11:55:56 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 205 | correct 145 | acc 70.73% | err 29.27% | macro_f1 69.87%
2025-11-12 11:55:56 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client9 local set
2025-11-12 11:55:59 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 319 | correct 227 | acc 71.16% | err 28.84% | macro_f1 75.49%
2025-11-12 11:55:59 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Global test local acc: 67.49
2025-11-12 11:55:59 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test finish-------------
2025-11-12 11:55:59 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 2/3] 测试耗时: 21.65s
2025-11-12 11:56:24 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 3/3] 训练耗时: 24.90s | 平均训练准确率: 63.92
2025-11-12 11:56:24 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test start-------------
2025-11-12 11:56:24 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client0 local set
2025-11-12 11:56:27 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 269 | correct 119 | acc 44.24% | err 55.76% | macro_f1 47.61%
2025-11-12 11:56:27 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client0 neighbor set
2025-11-12 11:56:46 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,194 | correct 1,574 | acc 71.74% | err 28.26% | macro_f1 65.45%
2025-11-12 11:56:46 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client1 local set
2025-11-12 11:56:49 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 339 | correct 250 | acc 73.75% | err 26.25% | macro_f1 72.59%
2025-11-12 11:56:49 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client1 neighbor set
2025-11-12 11:57:08 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,124 | correct 1,443 | acc 67.94% | err 32.06% | macro_f1 63.48%
2025-11-12 11:57:08 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client2 local set
2025-11-12 11:57:10 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 177 | acc 79.37% | err 20.63% | macro_f1 73.97%
2025-11-12 11:57:10 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client2 neighbor set
2025-11-12 11:57:29 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,240 | correct 1,513 | acc 67.54% | err 32.46% | macro_f1 62.85%
2025-11-12 11:57:29 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client3 local set
2025-11-12 11:57:31 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 211 | correct 185 | acc 87.68% | err 12.32% | macro_f1 84.75%
2025-11-12 11:57:31 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client3 neighbor set
2025-11-12 11:57:51 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,252 | correct 1,508 | acc 66.96% | err 33.04% | macro_f1 62.16%
2025-11-12 11:57:51 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client4 local set
2025-11-12 11:57:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 178 | correct 137 | acc 76.97% | err 23.03% | macro_f1 86.32%
2025-11-12 11:57:53 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client4 neighbor set
2025-11-12 11:58:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,285 | correct 1,556 | acc 68.10% | err 31.90% | macro_f1 62.01%
2025-11-12 11:58:13 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client5 local set
2025-11-12 11:58:15 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 262 | correct 213 | acc 81.30% | err 18.70% | macro_f1 78.23%
2025-11-12 11:58:15 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client5 neighbor set
2025-11-12 11:58:35 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,201 | correct 1,474 | acc 66.97% | err 33.03% | macro_f1 62.22%
2025-11-12 11:58:35 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client6 local set
2025-11-12 11:58:37 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 223 | correct 108 | acc 48.43% | err 51.57% | macro_f1 56.13%
2025-11-12 11:58:37 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client6 neighbor set
2025-11-12 11:58:57 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,240 | correct 1,582 | acc 70.62% | err 29.38% | macro_f1 65.12%
2025-11-12 11:58:57 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client7 local set
2025-11-12 11:59:00 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 234 | correct 132 | acc 56.41% | err 43.59% | macro_f1 69.94%
2025-11-12 11:59:00 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client7 neighbor set
2025-11-12 11:59:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,229 | correct 1,552 | acc 69.63% | err 30.37% | macro_f1 63.00%
2025-11-12 11:59:19 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client8 local set
2025-11-12 11:59:21 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 205 | correct 138 | acc 67.32% | err 32.68% | macro_f1 66.41%
2025-11-12 11:59:21 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client8 neighbor set
2025-11-12 11:59:41 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,258 | correct 1,545 | acc 68.42% | err 31.58% | macro_f1 63.32%
2025-11-12 11:59:41 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client9 local set
2025-11-12 11:59:44 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 319 | correct 241 | acc 75.55% | err 24.45% | macro_f1 78.71%
2025-11-12 11:59:44 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Evaluate on the client9 neighbor set
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - => result | total 2,144 | correct 1,440 | acc 67.16% | err 32.84% | macro_f1 61.87%
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Global test local acc: 69.10
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - Global test neighbor acc: 68.51
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - ------------local test finish-------------
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - [Epoch 3/3] 测试耗时: 218.13s
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - maximum test local acc: 69.100
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - mean of local acc: 53.493
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - maximum test neighbor acc: 68.509
2025-11-12 12:00:02 - oxford_flowers_dpfpl_8_0.0_1 - INFO - mean of neighbor acc: 68.509
