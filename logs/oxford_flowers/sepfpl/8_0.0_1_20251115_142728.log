2025-11-15 14:27:28 - 8_0.0_1 - INFO - 日志文件已创建: logs/oxford_flowers/sepfpl/8_0.0_1_20251115_142728.log
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Loading trainer: DP_FPL
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Loading dataset: OxfordFlowers
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Reading split from /home/liuxin25/dataset/oxford_flowers/split_zhou_OxfordFlowers.json
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Creating a baseline federated dataset
2025-11-15 14:27:28 - 8_0.0_1 - INFO - class_num 102
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 0, output_dict_len: 451
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 1, output_dict_len: 562
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 2, output_dict_len: 373
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 3, output_dict_len: 350
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 4, output_dict_len: 302
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 5, output_dict_len: 433
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 6, output_dict_len: 367
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 7, output_dict_len: 387
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 8, output_dict_len: 341
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 9, output_dict_len: 527
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Creating a baseline federated dataset
2025-11-15 14:27:28 - 8_0.0_1 - INFO - class_num 102
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [90, 54, 31, 35, 55, 72, 92, 42, 95, 84]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 0, output_dict_len: 269
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [74, 0, 1, 80, 27, 20, 77, 50, 66, 45]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 1, output_dict_len: 339
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [44, 82, 14, 32, 52, 70, 28, 51, 10, 21]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 2, output_dict_len: 223
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [33, 75, 5, 48, 87, 98, 23, 69, 62, 7]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 3, output_dict_len: 211
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [17, 18, 60, 34, 11, 58, 86, 13, 41, 30]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 4, output_dict_len: 178
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [24, 71, 56, 76, 37, 6, 53, 79, 97, 39]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 5, output_dict_len: 262
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [47, 65, 36, 91, 3, 63, 59, 9, 96, 64]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 6, output_dict_len: 223
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [94, 88, 99, 61, 19, 25, 4, 16, 8, 46]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 7, output_dict_len: 234
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [26, 2, 93, 85, 29, 22, 100, 67, 68, 38]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 8, output_dict_len: 205
2025-11-15 14:27:28 - 8_0.0_1 - INFO - user class dict total [83, 15, 12, 81, 43, 73, 78, 40, 101, 57, 89, 49]
2025-11-15 14:27:28 - 8_0.0_1 - INFO - idx: 9, output_dict_len: 319
2025-11-15 14:27:28 - 8_0.0_1 - INFO - Loading CLIP (backbone: ViT-B/16)
2025-11-15 14:27:30 - 8_0.0_1 - INFO - Building custom CLIP
2025-11-15 14:27:30 - 8_0.0_1 - INFO - Turning off gradients in both the image and the text encoder
2025-11-15 14:28:00 - 8_0.0_1 - INFO - [Epoch 1/30] 训练耗时: 29.53s | 平均训练准确率: 0.03
2025-11-15 14:28:28 - 8_0.0_1 - INFO - [Epoch 2/30] 训练耗时: 28.13s | 平均训练准确率: 2.05
2025-11-15 14:28:56 - 8_0.0_1 - INFO - [Epoch 3/30] 训练耗时: 28.23s | 平均训练准确率: 2.22
2025-11-15 14:29:23 - 8_0.0_1 - INFO - [Epoch 4/30] 训练耗时: 27.11s | 平均训练准确率: 3.23
2025-11-15 14:29:52 - 8_0.0_1 - INFO - [Epoch 5/30] 训练耗时: 28.42s | 平均训练准确率: 4.79
2025-11-15 14:30:20 - 8_0.0_1 - INFO - [Epoch 6/30] 训练耗时: 28.23s | 平均训练准确率: 4.65
2025-11-15 14:30:48 - 8_0.0_1 - INFO - [Epoch 7/30] 训练耗时: 28.31s | 平均训练准确率: 7.50
2025-11-15 14:31:17 - 8_0.0_1 - INFO - [Epoch 8/30] 训练耗时: 28.41s | 平均训练准确率: 9.06
2025-11-15 14:31:45 - 8_0.0_1 - INFO - [Epoch 9/30] 训练耗时: 28.35s | 平均训练准确率: 13.23
2025-11-15 14:32:13 - 8_0.0_1 - INFO - [Epoch 10/30] 训练耗时: 28.21s | 平均训练准确率: 10.07
2025-11-15 14:32:42 - 8_0.0_1 - INFO - [Epoch 11/30] 训练耗时: 28.26s | 平均训练准确率: 13.92
2025-11-15 14:33:10 - 8_0.0_1 - INFO - [Epoch 12/30] 训练耗时: 28.25s | 平均训练准确率: 18.92
2025-11-15 14:33:38 - 8_0.0_1 - INFO - [Epoch 13/30] 训练耗时: 28.20s | 平均训练准确率: 27.29
2025-11-15 14:34:06 - 8_0.0_1 - INFO - [Epoch 14/30] 训练耗时: 28.27s | 平均训练准确率: 32.22
2025-11-15 14:34:35 - 8_0.0_1 - INFO - [Epoch 15/30] 训练耗时: 28.17s | 平均训练准确率: 35.69
2025-11-15 14:35:02 - 8_0.0_1 - INFO - [Epoch 16/30] 训练耗时: 27.95s | 平均训练准确率: 37.19
2025-11-15 14:35:30 - 8_0.0_1 - INFO - [Epoch 17/30] 训练耗时: 27.47s | 平均训练准确率: 40.14
2025-11-15 14:35:58 - 8_0.0_1 - INFO - [Epoch 18/30] 训练耗时: 28.25s | 平均训练准确率: 45.49
2025-11-15 14:36:27 - 8_0.0_1 - INFO - [Epoch 19/30] 训练耗时: 28.34s | 平均训练准确率: 49.17
2025-11-15 14:36:55 - 8_0.0_1 - INFO - [Epoch 20/30] 训练耗时: 28.26s | 平均训练准确率: 53.23
2025-11-15 14:37:23 - 8_0.0_1 - INFO - [Epoch 21/30] 训练耗时: 28.18s | 平均训练准确率: 56.15
2025-11-15 14:37:51 - 8_0.0_1 - INFO - [Epoch 22/30] 训练耗时: 28.22s | 平均训练准确率: 59.86
2025-11-15 14:38:20 - 8_0.0_1 - INFO - [Epoch 23/30] 训练耗时: 28.38s | 平均训练准确率: 65.24
2025-11-15 14:38:48 - 8_0.0_1 - INFO - [Epoch 24/30] 训练耗时: 28.33s | 平均训练准确率: 67.47
2025-11-15 14:39:16 - 8_0.0_1 - INFO - [Epoch 25/30] 训练耗时: 28.33s | 平均训练准确率: 71.18
2025-11-15 14:39:42 - 8_0.0_1 - INFO - [Epoch 26/30] 训练耗时: 25.76s | 平均训练准确率: 73.72
2025-11-15 14:40:07 - 8_0.0_1 - INFO - [Epoch 27/30] 训练耗时: 25.47s | 平均训练准确率: 73.96
2025-11-15 14:40:33 - 8_0.0_1 - INFO - [Epoch 28/30] 训练耗时: 25.75s | 平均训练准确率: 78.82
2025-11-15 14:40:33 - 8_0.0_1 - INFO - ------------local test start-------------
2025-11-15 14:40:33 - 8_0.0_1 - INFO - Evaluate on the client0 local set
2025-11-15 14:40:36 - 8_0.0_1 - INFO - => result | total 269 | correct 158 | acc 58.74% | err 41.26% | macro_f1 36.12%
2025-11-15 14:40:36 - 8_0.0_1 - INFO - Evaluate on the client0 neighbor set
2025-11-15 14:40:54 - 8_0.0_1 - INFO - => result | total 2,194 | correct 3 | acc 0.14% | err 99.86% | macro_f1 0.14%
2025-11-15 14:40:54 - 8_0.0_1 - INFO - Evaluate on the client1 local set
2025-11-15 14:40:57 - 8_0.0_1 - INFO - => result | total 339 | correct 180 | acc 53.10% | err 46.90% | macro_f1 21.58%
2025-11-15 14:40:57 - 8_0.0_1 - INFO - Evaluate on the client1 neighbor set
2025-11-15 14:41:14 - 8_0.0_1 - INFO - => result | total 2,124 | correct 80 | acc 3.77% | err 96.23% | macro_f1 1.13%
2025-11-15 14:41:14 - 8_0.0_1 - INFO - Evaluate on the client2 local set
2025-11-15 14:41:16 - 8_0.0_1 - INFO - => result | total 223 | correct 129 | acc 57.85% | err 42.15% | macro_f1 42.10%
2025-11-15 14:41:16 - 8_0.0_1 - INFO - Evaluate on the client2 neighbor set
2025-11-15 14:41:34 - 8_0.0_1 - INFO - => result | total 2,240 | correct 11 | acc 0.49% | err 99.51% | macro_f1 0.40%
2025-11-15 14:41:34 - 8_0.0_1 - INFO - Evaluate on the client3 local set
2025-11-15 14:41:36 - 8_0.0_1 - INFO - => result | total 211 | correct 126 | acc 59.72% | err 40.28% | macro_f1 37.49%
2025-11-15 14:41:36 - 8_0.0_1 - INFO - Evaluate on the client3 neighbor set
2025-11-15 14:41:54 - 8_0.0_1 - INFO - => result | total 2,252 | correct 25 | acc 1.11% | err 98.89% | macro_f1 0.98%
2025-11-15 14:41:54 - 8_0.0_1 - INFO - Evaluate on the client4 local set
2025-11-15 14:41:56 - 8_0.0_1 - INFO - => result | total 178 | correct 149 | acc 83.71% | err 16.29% | macro_f1 82.87%
2025-11-15 14:41:56 - 8_0.0_1 - INFO - Evaluate on the client4 neighbor set
2025-11-15 14:42:14 - 8_0.0_1 - INFO - => result | total 2,285 | correct 8 | acc 0.35% | err 99.65% | macro_f1 0.26%
2025-11-15 14:42:14 - 8_0.0_1 - INFO - Evaluate on the client5 local set
2025-11-15 14:42:16 - 8_0.0_1 - INFO - => result | total 262 | correct 154 | acc 58.78% | err 41.22% | macro_f1 34.81%
2025-11-15 14:42:16 - 8_0.0_1 - INFO - Evaluate on the client5 neighbor set
2025-11-15 14:42:34 - 8_0.0_1 - INFO - => result | total 2,201 | correct 54 | acc 2.45% | err 97.55% | macro_f1 1.17%
2025-11-15 14:42:34 - 8_0.0_1 - INFO - Evaluate on the client6 local set
2025-11-15 14:42:36 - 8_0.0_1 - INFO - => result | total 223 | correct 143 | acc 64.13% | err 35.87% | macro_f1 46.70%
2025-11-15 14:42:36 - 8_0.0_1 - INFO - Evaluate on the client6 neighbor set
2025-11-15 14:42:54 - 8_0.0_1 - INFO - => result | total 2,240 | correct 0 | acc 0.00% | err 100.00% | macro_f1 0.00%
2025-11-15 14:42:54 - 8_0.0_1 - INFO - Evaluate on the client7 local set
2025-11-15 14:42:56 - 8_0.0_1 - INFO - => result | total 234 | correct 153 | acc 65.38% | err 34.62% | macro_f1 59.46%
2025-11-15 14:42:56 - 8_0.0_1 - INFO - Evaluate on the client7 neighbor set
2025-11-15 14:43:14 - 8_0.0_1 - INFO - => result | total 2,229 | correct 14 | acc 0.63% | err 99.37% | macro_f1 0.72%
2025-11-15 14:43:14 - 8_0.0_1 - INFO - Evaluate on the client8 local set
2025-11-15 14:43:16 - 8_0.0_1 - INFO - => result | total 205 | correct 140 | acc 68.29% | err 31.71% | macro_f1 51.40%
2025-11-15 14:43:16 - 8_0.0_1 - INFO - Evaluate on the client8 neighbor set
2025-11-15 14:43:35 - 8_0.0_1 - INFO - => result | total 2,258 | correct 2 | acc 0.09% | err 99.91% | macro_f1 0.08%
2025-11-15 14:43:35 - 8_0.0_1 - INFO - Evaluate on the client9 local set
2025-11-15 14:43:37 - 8_0.0_1 - INFO - => result | total 319 | correct 210 | acc 65.83% | err 34.17% | macro_f1 40.57%
2025-11-15 14:43:37 - 8_0.0_1 - INFO - Evaluate on the client9 neighbor set
2025-11-15 14:43:55 - 8_0.0_1 - INFO - => result | total 2,144 | correct 0 | acc 0.00% | err 100.00% | macro_f1 0.00%
2025-11-15 14:43:55 - 8_0.0_1 - INFO - Global test local acc: 63.55
2025-11-15 14:43:55 - 8_0.0_1 - INFO - Global test neighbor acc: 0.90
2025-11-15 14:43:55 - 8_0.0_1 - INFO - ------------local test finish-------------
2025-11-15 14:43:55 - 8_0.0_1 - INFO - [Epoch 28/30] 测试耗时: 201.35s
2025-11-15 14:44:20 - 8_0.0_1 - INFO - [Epoch 29/30] 训练耗时: 25.64s | 平均训练准确率: 79.41
2025-11-15 14:44:20 - 8_0.0_1 - INFO - ------------local test start-------------
2025-11-15 14:44:20 - 8_0.0_1 - INFO - Evaluate on the client0 local set
2025-11-15 14:44:22 - 8_0.0_1 - INFO - => result | total 269 | correct 156 | acc 57.99% | err 42.01% | macro_f1 34.79%
2025-11-15 14:44:22 - 8_0.0_1 - INFO - Evaluate on the client0 neighbor set
